<Page
    x:Class="Worldescape.InsideWorldPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:Worldescape"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    FontFamily="Segoe UI"
    mc:Ignorable="d">

    <Grid>

        <!--  Canvas host  -->
        <ScrollViewer
            x:Name="CanvasScrollViewer"
            HorizontalScrollBarVisibility="Auto"
            IsTabStop="False"
            VerticalScrollBarVisibility="Auto">

            <Canvas
                x:Name="Canvas_root"
                Grid.Row="1"
                Width="8000"
                Height="8000"
                AllowDrop="True"
                Background="Transparent"
                PointerPressed="Canvas_root_PointerPressed" />

        </ScrollViewer>

        <!--  Top middle connection buttons  -->
        <StackPanel
            x:Name="TopButtonsHolder"
            Margin="20"
            HorizontalAlignment="Center"
            VerticalAlignment="Top">

            <!--  Connect  -->
            <Button
                x:Name="ConnectButton"
                MinWidth="110"
                Margin="10"
                Click="ConnectButton_Click"
                Content="Connect"
                FontSize="20"
                Style="{StaticResource MaterialDesign_RoundButton_Style}" />

        </StackPanel>

        <!--  Logged in user's avatar button, scrolls to avatar, becomes visible after avatar hub login  -->
        <Button
            x:Name="MyAvatarButton"
            Width="70"
            Height="70"
            Margin="20"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Click="MyAvatarButton_Click"
            Style="{StaticResource MaterialDesign_RoundButton_Style}"
            Visibility="Collapsed">

            <Button.Content>

                <Border
                    Width="40"
                    Height="40"
                    ClipToBounds="True"
                    CornerRadius="40">

                    <!--  AvatarImageHolder  -->
                    <Image
                        x:Name="AvatarImageHolder"
                        Width="40"
                        Height="40"
                        Stretch="UniformToFill" />

                </Border>

            </Button.Content>

        </Button>

        <!--  Bottom middle construct, messaging, status controls  -->
        <StackPanel
            Margin="20"
            HorizontalAlignment="Center"
            VerticalAlignment="Bottom">

            <!--  Craft and Add buttons  -->
            <StackPanel
                x:Name="ConstructCraftingButtonsHolder"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Visibility="Collapsed">

                <StackPanel Orientation="Horizontal">

                    <!--  Construct  -->
                    <ToggleButton
                        x:Name="ConstructCraftButton"
                        MinWidth="110"
                        Margin="10"
                        Click="ConstructCraftButton_Click"
                        Content="Construct"
                        FontSize="20"
                        Style="{StaticResource MaterialDesign_RoundToggleButton_Style}" />

                    <!--  Add  -->
                    <ToggleButton
                        x:Name="ConstructAddButton"
                        MinWidth="110"
                        Margin="10"
                        Click="ConstructAddButton_Click"
                        Content="Add"
                        FontSize="20"
                        Style="{StaticResource MaterialDesign_RoundToggleButton_Style}"
                        Visibility="Collapsed" />

                    <!--  Select  -->
                    <ToggleButton
                        x:Name="ConstructMultiSelectButton"
                        MinWidth="110"
                        Margin="10"
                        Click="ConstructMultiSelectButton_Click"
                        Content="Select"
                        FontSize="20"
                        Style="{StaticResource MaterialDesign_RoundToggleButton_Style}"
                        Visibility="Collapsed" />

                </StackPanel>

                <ContentControl Style="{StaticResource MaterialDesign_PopupContent_Style}" Visibility="{Binding ElementName=ConstructMultiSelectButton, Path=IsChecked, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <StackPanel x:Name="MultiSelectedConstructsHolder" Orientation="Horizontal" />
                </ContentControl>

            </StackPanel>

            <!--  Selected construct images and avatar images with commands  -->
            <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">

                <!--  Selected and operational construct images  -->
                <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">

                    <!--  Shows adding, cloning, moving construct  -->
                    <ContentControl
                        x:Name="OperationalConstructHolder"
                        Margin="10"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Style="{StaticResource MaterialDesign_PopupContent_Style}"
                        Visibility="Collapsed" />

                    <!--  Shows clicked on construct  -->
                    <ContentControl
                        x:Name="SelectedConstructHolder"
                        Margin="10"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Style="{StaticResource MaterialDesign_PopupContent_Style}"
                        Visibility="Collapsed" />

                </StackPanel>

                <!--  Selected avatar image and commands  -->
                <StackPanel
                    Name="AvatarCommandsHolder"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal">

                    <!--  Selected avatar image  -->
                    <ContentControl
                        x:Name="SelectedAvatarHolder"
                        Margin="10"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Style="{StaticResource MaterialDesign_PopupContent_Style}"
                        Visibility="Collapsed" />

                    <!--  Selected avatar commands  -->
                    <StackPanel HorizontalAlignment="Center">

                        <!--  Commands for own avatar  -->
                        <WrapPanel
                            x:Name="OwnAvatarActionsHolder"
                            Orientation="Vertical"
                            Visibility="Collapsed">

                            <!--  Create post, shows a child window to create a post  -->
                            <Button
                                x:Name="CreatePostButton"
                                MinWidth="110"
                                Margin="5,10"
                                Click="CreatePostButton_Click"
                                Content="Post"
                                FontSize="20"
                                Style="{StaticResource MaterialDesign_RoundButton_Style}" />

                            <ToggleButton
                                x:Name="SelectStatusButton"
                                MinWidth="110"
                                Margin="5,10"
                                Click="SelectStatusButton_Click"
                                Content="Status"
                                FontSize="20"
                                Style="{StaticResource MaterialDesign_RoundToggleButton_Style}" />

                        </WrapPanel>

                        <!--  Commands for other avatar  -->
                        <WrapPanel
                            x:Name="OtherAvatarActionsHolder"
                            Margin="5,0"
                            Orientation="Horizontal"
                            Visibility="Collapsed">

                            <!--  Message, activates messaging UI  -->
                            <Button
                                x:Name="MessageAvatarButton"
                                MinWidth="110"
                                Margin="5,10"
                                Click="MessageAvatarButton_Click"
                                Content="Message"
                                FontSize="20"
                                Style="{StaticResource MaterialDesign_RoundButton_Style}" />

                        </WrapPanel>

                    </StackPanel>

                    <!--  Set own status commands  -->
                    <ContentControl
                        x:Name="AvatarActivityStatusHolder"
                        Margin="10"
                        Style="{StaticResource MaterialDesign_PopupContent_Style}"
                        Visibility="Collapsed">

                        <StackPanel>
                            <MenuItem
                                Click="SetStatusMenuItem_Click"
                                Content="Idle"
                                Style="{StaticResource MaterialDesign_ContextMenuItem_Style}" />
                            <MenuItem
                                Click="SetStatusMenuItem_Click"
                                Content="Working"
                                Style="{StaticResource MaterialDesign_ContextMenuItem_Style}" />
                            <MenuItem
                                Click="SetStatusMenuItem_Click"
                                Content="Inspecting"
                                Style="{StaticResource MaterialDesign_ContextMenuItem_Style}" />
                            <MenuItem
                                Click="SetStatusMenuItem_Click"
                                Content="Greeting"
                                Style="{StaticResource MaterialDesign_ContextMenuItem_Style}" />
                            <MenuItem
                                Click="SetStatusMenuItem_Click"
                                Content="Away"
                                Style="{StaticResource MaterialDesign_ContextMenuItem_Style}" />
                        </StackPanel>

                    </ContentControl>

                </StackPanel>

            </StackPanel>

            <!--  Construct operation buttons  -->
            <WrapPanel
                x:Name="ConstructOperationalCommandsHolder"
                Orientation="Horizontal"
                Visibility="Collapsed">

                <!--  Move  -->
                <ToggleButton
                    x:Name="ConstructMoveButton"
                    MinWidth="110"
                    Margin="10"
                    Click="ConstructMoveButton_Click"
                    Content="Move"
                    FontSize="20"
                    Style="{StaticResource MaterialDesign_RoundToggleButton_Style}" />

                <!--  Clone, not available while multi selection  -->
                <ToggleButton
                    x:Name="ConstructCloneButton"
                    MinWidth="110"
                    Margin="10"
                    Click="ConstructCloneButton_Click"
                    Content="Clone"
                    FontSize="20"
                    Style="{StaticResource MaterialDesign_RoundToggleButton_Style}"
                    Visibility="{Binding ElementName=ConstructMultiSelectButton, Path=IsChecked, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=inverse}" />

                <!--  Upward  -->
                <Button
                    x:Name="ConstructBringForwardButton"
                    MinWidth="110"
                    Margin="10"
                    Click="ConstructBringForwardButton_Click"
                    Content="Upward"
                    FontSize="20"
                    Style="{StaticResource MaterialDesign_RoundButton_Style}" />

                <!--  Downward  -->
                <Button
                    x:Name="ConstructSendBackwardButton"
                    MinWidth="110"
                    Margin="10"
                    Click="ConstructSendBackwardButton_Click"
                    Content="Downward"
                    FontSize="20"
                    Style="{StaticResource MaterialDesign_RoundButton_Style}" />

                <!--  Enlarge  -->
                <Button
                    x:Name="ConstructScaleUpButton"
                    MinWidth="110"
                    Margin="10"
                    Click="ConstructScaleUpButton_Click"
                    Content="Enlarge"
                    FontSize="20"
                    Style="{StaticResource MaterialDesign_RoundButton_Style}" />

                <!--  Dwindle  -->
                <Button
                    x:Name="ConstructScaleDownButton"
                    MinWidth="110"
                    Margin="10"
                    Click="ConstructScaleDownButton_Click"
                    Content="Dwindle"
                    FontSize="20"
                    Style="{StaticResource MaterialDesign_RoundButton_Style}" />

                <!--  Rotate  -->
                <Button
                    x:Name="ConstructRotateButton"
                    MinWidth="110"
                    Margin="10"
                    Click="ConstructRotateButton_Click"
                    Content="Rotate"
                    FontSize="20"
                    Style="{StaticResource MaterialDesign_RoundButton_Style}" />

                <!--  Delete  -->
                <Button
                    x:Name="ConstructDeleteButton"
                    MinWidth="110"
                    Margin="10"
                    Click="ConstructDeleteButton_Click"
                    Content="Delete"
                    FontSize="20"
                    Style="{StaticResource MaterialDesign_RoundButton_Style}" />

            </WrapPanel>

            <!--  Bottom middle Messaging controls  -->
            <StackPanel
                x:Name="MessagingControlsHolder"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Orientation="Horizontal"
                Visibility="Collapsed">

                <!--  Message from avatar image  -->
                <ContentControl
                    x:Name="MessagingFromAvatarHolder"
                    Margin="5,10"
                    VerticalAlignment="Center" />

                <!--  Message box  -->
                <TextBox
                    x:Name="MessagingTextBox"
                    Width="500"
                    Margin="10"
                    VerticalAlignment="Center"
                    FontSize="16"
                    KeyDown="MessagingTextBox_KeyDown"
                    Style="{StaticResource MaterialDesign_TextBox_Style}"
                    TextWrapping="Wrap" />

                <!--  Message to avatar image  -->
                <ContentControl
                    x:Name="MessagingToAvatarHolder"
                    Margin="5,10"
                    VerticalAlignment="Center" />

                <!--  Send  -->
                <Button
                    x:Name="SendUnicastMessageButton"
                    MinWidth="110"
                    Margin="10"
                    Click="SendUnicastMessageButton_Click"
                    Content="Send"
                    FontSize="20"
                    Style="{StaticResource MaterialDesign_RoundButton_Style}" />

            </StackPanel>

        </StackPanel>

        <!--  Bottom right people counter  -->
        <TextBlock
            Margin="20"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            FontSize="16"
            FontWeight="Bold">
            <Run x:Name="ParticipantsCount" />
            <Run Text=" people joined" />
        </TextBlock>

    </Grid>

</Page>